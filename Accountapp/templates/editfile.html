<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Accounting Form</title>
    <link rel="stylesheet" type="text/css" href="https://cdnjs.cloudflare.com/ajax/libs/select2/4.0.13/css/select2.min.css" />
    <script src="https://code.jquery.com/jquery-3.6.4.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/select2/4.0.13/js/select2.min.js"></script>

    <link rel="stylesheet" type="text/css" href="https://cdnjs.cloudflare.com/ajax/libs/select2/4.0.13/css/select2.min.css" />
    <script src="https://code.jquery.com/jquery-3.6.4.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/select2/4.0.13/js/select2.min.js"></script>

    <style>
      body {
        font-family: Arial, sans-serif;
        background-color: #f4f4f4;
        margin: 0;
        padding: 0;
      }
      
      .container {
        max-width: 600px;
        margin: 50px auto;
        background-color: #fff;
        padding: 20px;
        border-radius: 8px;
        box-shadow: 0 0 10px rgba(0, 0, 0, 0.1);
      }
      
      label {
        display: block;
        margin-bottom: 8px;
      }
      
      input,
      select,
      textarea {
        width: 100%;
        padding: 8px;
        margin-bottom: 16px;
        box-sizing: border-box;
      }
      
      #btn {
        background-color: #4caf50;
        color: #fff;
        padding: 10px 15px;
        border: none;
        border-radius: 4px;
        cursor: pointer;
      }
      
      button:hover {
        background-color: #45a049;
      }
      
      .search-bar {
        position: relative;
      }
      
      .calendar-icon {
        position: absolute;
        top: 50%;
        right: 10px;
        transform: translateY(-50%);
        cursor: pointer;
      }
    </style>
  </head>
  <body>
    <div class="container">
      <h2>Accounting Form</h2>
      <form action="{% url 'updatefile' %}" method="post" enctype="multipart/form-data">
        {% csrf_token %}

        <label for="amount">Amount:</label>
        <input type="text" id="amount" name="amount" value="{{ data.amount }}" />
        <input type="text" id="amount" name="userid" hidden value="{{ data.id }}" />

        <label for="head">Head:</label>
        <select id="head" name="head">
          {% for head_option in heads %}
            <option value="{{ head_option.id }}">{{ head_option.name }}</option>
          {% endfor %}
        </select>

        <label for="subHead">Sub Head:</label>
        <select id="subHead" name="subHead">
          <option value="sub1">Sub Head 1</option>
          <option value="sub2">Sub Head 2</option>
        </select>

        <label for="description">Description:</label>
        <textarea id="description" name="description" rows="4">{{ data.description }}</textarea>

        <label for="receiptNumber">Receipt Number:</label>
        <input type="text" id="receiptNumber" name="receiptNumber" value="{{ data.receipt_number }}" />

        <label for="chargeBy">Charge By:</label>
        <select id="chargeBy" name="chargeBy">
          {% for charge_option in charges %}
            <option value="{{ charge_option.id }}">{{ charge_option.name }}</option>
          {% endfor %}
        </select>

        <label for="paidBy">Paid By:</label>
        <select id="paidBy" name="paidBy">
          {% for paid_option in Paids %}
            <option value="{{ paid_option.id }}">{{ paid_option.name }}</option>
          {% endfor %}
        </select>

        <label for="claimBy">Claim By:</label>
        <select id="claimBy" name="claimBy">
          {% for claim_option in claims %}
            <option value="{{ claim_option.id }}">{{ claim_option.name }}</option>
          {% endfor %}
        </select>

        <label for="instrument">Instrument:</label>
        <select id="instrument" name="instrument" onchange="toggleInstrumentFields()">
          <option value="cash">Select field</option>
          <option value="cash">Cash</option>
          <option value="cheque">Cheque</option>
          <option value="online">Online Transfer</option>
        </select>

        <div id="cashFields" style="display: none;">
          <label for="cashNumber">Cash Number:</label>
          <input type="text" id="cashNumber" name="cashNumber" />
        </div>

        <div id="chequeFields" style="display: none;">
          <label for="chequeNumber">Cheque Number:</label>
          <input type="text" id="chequeNumber" name="chequeNumber" />
        </div>

        <div id="onlineFields" style="display: none;">
          <label for="onlineNumber">Online Transfer Number:</label>
          <input type="text" id="onlineNumber" name="onlineNumber" />
        </div>

        <label for="comments">Comments:</label>
        <textarea id="comments" name="comments" rows="4">{{ data.comments }}</textarea>

        <label for="vendors">
          Vendors:

          <button type="button" class="add-vendor-button" onclick="addVendor()">
            <svg width="15" height="15" viewBox="0 0 24 24">
              <path d="M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm0 18c-4.41 0-8-3.59-8-8s3.59-8 8-8 8 3.59 8 8-3.59 8-8 8zm-1-13h2v4h4v2h-4v4h-2v-4H7v-2h4z" />
            </svg>
          </button>
        </label>

        <select id="vendors" name="vendors">
          {% for vendor_option in vendors %}
            <option value="{{ vendor_option }}">{{ vendor_option }}</option>
          {% endfor %}
        </select>

        <label for="attachments">Attachments:</label>
        <input type="file" id="attachments" name="attachments" />

        <button id="btn" type="submit">Submit</button>
      </form>
    </div>

    <script>
      function toggleInstrumentFields() {
        var instrument = document.getElementById('instrument').value
        var cashFields = document.getElementById('cashFields')
        var chequeFields = document.getElementById('chequeFields')
        var onlineFields = document.getElementById('onlineFields')
      
        if (instrument === 'cash') {
          cashFields.style.display = 'block'
          chequeFields.style.display = 'none'
          onlineFields.style.display = 'none'
        } else if (instrument === 'cheque') {
          cashFields.style.display = 'none'
          chequeFields.style.display = 'block'
          onlineFields.style.display = 'none'
        } else if (instrument === 'online') {
          cashFields.style.display = 'none'
          chequeFields.style.display = 'none'
          onlineFields.style.display = 'block'
        }
      }
      
      function addVendor() {
        var newVendor = prompt('Enter a new vendor:')
      
        if (newVendor) {
          var vendorsDropdown = document.getElementById('vendors')
      
          // Check if the vendor already exists in the dropdown
          var vendorExists = Array.from(vendorsDropdown.options).some(function (option) {
            return option.value === newVendor
          })
      
          if (!vendorExists) {
            var option = document.createElement('option')
            option.value = newVendor
            option.text = newVendor
            vendorsDropdown.add(option)
          } else {
            alert('Vendor already exists in the dropdown.')
          }
        }
      }
    </script>
  </body>
</html>

<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <title>Accounting Form</title>
    {% load static %}

    <link rel="shortcut icon" type="image/png" href="{% static 'images/logos/favicon.png' %}" />
    <link rel="stylesheet" href="{% static 'css/styles.min.css' %}" />
    <link rel="stylesheet" href="{% static 'css/custom.css' %}" />
    <style>
      html {
        background-color: #f2f2f2 !important;
      }
      body {
        background-color: #f2f2f2 !important;
      }
      .main-card {
        background-color: #fcfcfc !important;
      }
    </style>
  </head>

  <body>
    <!-- Body Wrapper -->
    <div class="page-wrapper" id="main-wrapper" data-layout="horizontal" data-navbarbg="skin6" data-header-position="fixed">
      <!-- Main wrapper -->
      <div class="body-wrapper">
        <div class="container-fluid mt-4">
          <div class="container-fluid">
            <div class="card">
              <div class="card-body main-card">
                <div class="row">
                  <div class="col-md-12">
                    <h5 class="card-title fw-semibold mb-4">Accounting Form</h5>
                    {% comment %} <p class="form-label text-primary">*Hover over the fields for more Information</p> {% endcomment %}
                    <div class="card">
                      <div class="card-body">
                        <form action="{% url 'updatefile' %}" method="post" enctype="multipart/form-data">
                          {% csrf_token %}
                          <div class="row">
                            <div class="mb-3 col-md-6">
                              <label for="amount" class="form-label">*Amount</label>
                              <input type="text" class="form-control" id="amount" name="amount" value="{{ data.amount }}" placeholder="Please enter a valid amount" required />
                              <input type="text" class="form-control" id="amount" name="userid" hidden value="{{ data.id }}" />
                            </div>

                            <div class="mb-3 col-md-6">
                              <label for="receiptNumber" class="form-label">*Receipt Number</label>
                              <input class="form-control" type="text" id="receiptNumber" name="receiptNumber" value="{{ data.receipt_number }}" placeholder="Enter a valid receipt number" required />
                            </div>

                            <div class="mb-3 col-md-6">
                              <label for="head" class="form-label">*Head</label>
                              <select id="head" name="head" class="form-select" required>
                                {% for head_option in heads %}
                                  <option class="form-control" value="{{ head_option.id }}">{{ head_option.name }}</option>
                                {% endfor %}
                              </select>
                            </div>

                            <div class="mb-3 col-md-6">
                              <label for="subHead" class="form-label">*Sub Head</label>
                              <select id="subHead" name="subHead" class="form-select" required>
                                {% for subhead_option in subheads %}
                                  <option class="form-control" value="{{ subhead_option.id }}">{{ subhead_option.name }}</option>
                                {% endfor %}
                              </select>
                            </div>

                            <div class="mb-3 col-md-6">
                              <label for="chargeBy" class="form-label">*Charge By</label>
                              <select id="chargeBy" name="chargeBy" class="form-select" required>
                                {% for charge_option in charges %}
                                  <option class="form-control" value="{{ charge_option.id }}">{{ charge_option.name }}</option>
                                {% endfor %}
                              </select>
                            </div>

                            <div class="mb-3 col-md-6">
                              <label for="paidBy" class="form-label">*Paid By</label>
                              <select id="paidBy" name="paidBy" class="form-select" required>
                                {% for paid_option in paids %}
                                  <option class="form-control" value="{{ paid_option.id }}">{{ paid_option.name }}</option>
                                {% endfor %}
                              </select>
                            </div>

                            <div class="mb-3 col-md-6">
                              <label for="claimBy" class="form-label">*Claim By</label>
                              <select id="claimBy" name="claimBy" class="form-select" required>
                                {% for claim_option in claims %}
                                  <option class="form-control" value="{{ claim_option.id }}">{{ claim_option.name }}</option>
                                {% endfor %}
                              </select>
                            </div>

                            <div class="mb-3 col-md-6">
                              <label for="vendors" class="form-label">
                                *Vendors
                                <a href="" class="add-vendor-button text-primary text-nowrap" onclick="addVendor()"><b><i class="ti ti-square-plus" style="font-size: 1.1rem;"></i></b></a>
                              </label>

                              <select id="vendors" name="vendors" class="form-select" required>
                                {% for vendor_option in vendors %}
                                  <option class="form-control" value="{{ vendor_option }}">{{ vendor_option }}</option>
                                {% endfor %}
                              </select>
                            </div>

                            <div class="mb-3 col-md-6">
                              <label for="attachments" class="form-label" style="cursor: pointer;">Attachments</label>
                              <input class="form-control" type="file" id="attachments" name="attachments" />
                            </div>

                            <div class="mb-3 col-md-6">
                              <label for="instrument" class="form-label">*Instrument</label>
                              <select id="instrument" name="instrument" class="form-select" onchange="toggleInstrumentFields()" required>
                                <option class="form-control" value="">Select instrument</option>
                                <option class="form-control" value="cash">Cash</option>
                                <option class="form-control" value="cheque">Cheque</option>
                                <option class="form-control" value="online">Online Transfer</option>
                              </select>
                            </div>

                            <div id="cashFields" style="display: none;" class="mb-3 col-md-6">
                              <label for="cashNumber" class="form-label">*Cash Number</label>
                              <input type="text" id="cashNumber" name="cashNumber" class="form-control" required />
                            </div>

                            <div id="chequeFields" style="display: none;" class="mb-3 col-md-6">
                              <label for="chequeNumber" class="form-label">*Cheque Number</label>
                              <input type="text" id="chequeNumber" name="chequeNumber" class="form-control" required />
                            </div>

                            <div id="onlineFields" style="display: none;" class="mb-3 col-md-6">
                              <label for="onlineNumber" class="form-label">*Online Transfer Number</label>
                              <input type="text" id="onlineNumber" name="onlineNumber" class="form-control" required />
                            </div>

                            <div id="hiddenField" style="display: none; visibility: hidden;" class="mb-3 col-md-6"></div>

                            <div class="mb-3 col-md-6">
                              <label for="description" class="form-label">Description</label>
                              <textarea class="form-control" rows="4" id="description" name="description" placeholder="Please enter some description">{{ data.description }}</textarea>
                            </div>

                            <div class="mb-3 col-md-6">
                              <label for="comments" class="form-label">Comments</label>
                              <textarea class="form-control" rows="4" id="comments" name="comments" placeholder="Please enter some comments">{{ data.comments }}</textarea>
                            </div>
                          </div>

                          <button id="btn" type="submit" class="btn btn-primary mt-3">Submit</button>
                        </form>
                      </div>
                    </div>
                  </div>
                </div>
              </div>
            </div>
          </div>
        </div>
      </div>
    </div>
    <script>
      function toggleInstrumentFields() {
        var instrument = document.getElementById('instrument').value
        var cashFields = document.getElementById('cashFields')
        var chequeFields = document.getElementById('chequeFields')
        var onlineFields = document.getElementById('onlineFields')
        var hiddenField = document.getElementById('hiddenField')
      
        if (instrument === 'cash') {
          cashFields.style.display = 'block'
          chequeFields.style.display = 'none'
          onlineFields.style.display = 'none'
          hiddenField.style.display = 'block'
        } else if (instrument === 'cheque') {
          cashFields.style.display = 'none'
          chequeFields.style.display = 'block'
          onlineFields.style.display = 'none'
          hiddenField.style.display = 'block'
        } else if (instrument === 'online') {
          cashFields.style.display = 'none'
          chequeFields.style.display = 'none'
          onlineFields.style.display = 'block'
          hiddenField.style.display = 'block'
        }
      }
      
      function addVendor() {
        var newVendor = prompt('Enter a new vendor:')
      
        if (newVendor) {
          var vendorsDropdown = document.getElementById('vendors')
      
          // Check if the vendor already exists in the dropdown
          var vendorExists = Array.from(vendorsDropdown.options).some(function (option) {
            return option.value === newVendor
          })
      
          if (!vendorExists) {
            var option = document.createElement('option')
            option.value = newVendor
            option.text = newVendor
            vendorsDropdown.add(option)
          } else {
            alert('Vendor already exists in the dropdown.')
          }
        }
      }
    </script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/select2/4.0.13/js/select2.min.js"></script>
    <script src="{% static 'libs/jquery/dist/jquery.min.js' %}"></script>
    <script src="{% static 'libs/bootstrap/dist/js/bootstrap.bundle.min.js' %}"></script>
    <script src="{% static 'js/sidebarmenu.js' %}"></script>
    <script src="{% static 'js/app.min.js' %}"></script>
    <script src="{% static 'libs/simplebar/dist/simplebar.js' %}"></script>
  </body>
</html>
